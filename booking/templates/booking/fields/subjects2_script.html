{% if subjectform %}
<script type="text/javascript" src="{% static 'js/formset-row.js' %}"></script>
<script type="text/javascript">
    <!--
    $(function(){

        var extraGymRows = $("#gymnasiefag > div").not(":first");
        var extraGrundRows = $("#grundskolefag > div").not(":first");

        var mingleRow = function(row) {
            row.removeAttr("id");
            row.find("label").text(null);
            var adder = row.find(".rowadder");
            adder.addClass("rowremover");
            adder.removeClass("rowadder");
            adder.find("a").text('{% trans "Fjern" %}');
            adder.find("a").click(removeRowEvent);
        };

        mingleRow(extraGymRows);
        mingleRow(extraGrundRows);

        $(".rowadder a").click(function(){
            var newRow = formset.addRow(
                    $("#{{ subjectform.management_form.TOTAL_FORMS.id_for_label }}"),
                    $("#{{ subjectform.management_form.MAX_NUM_FORMS.id_for_label }}"),
                    $(this).closest(".rowprototype"),
                    $(this).closest(".rowcontainer")
            );
            mingleRow(newRow);
            modal.updateHeight();
            return false;
        });

        var removeRowEvent = function() {
            formset.removeRow(
                    "#{{ subjectform.management_form.TOTAL_FORMS.id_for_label }}",
                    $(this).parents(".form-group")
            );
            modal.updateHeight();
        };

        $(".rowremover a").click(removeRowEvent);
    });
    //-->
</script>
{% endif %}