{% load i18n %}
<div class="listcontainer {{ listname }}">
    {% if list|length > 0 %}
        <form action="" method="post">
            {% csrf_token %}

            <input type="hidden" name="listname" value="{{ listname }}"/>
            <div style="display:none" data-move="input" data-target="#move_{data-attr}.input-container" data-attr="value">
            {{ form }}
            </div>

            {% for booking in list %}
                <div class="list-group-item clearfix">
                    <a href="{% url 'booking-view' booking.id %}">
                        <dl class="dl-horizontal">
                            <dt class="text-muted">{% trans 'Skole:' %}</dt>
                            <dd><strong>{{ booking.booker.school.name }}, {{ booking.booker.school.postcode }}</strong></dd>
                            <dt class="text-muted">{% trans 'Navn:' %}</dt>
                            <dd>{{ booking.booker.get_name }}</dd>
                            <dt class="text-muted">{% trans 'Email:' %}</dt>
                            <dd>{{ booking.booker.email }}</dd>
                            <dt class="text-muted">{% trans 'Antal:' %}</dt>
                            <dd>{{ booking.booker.attendee_count }}</dd>
                            <dt class="text-muted">{% trans 'Antal lærere:' %}</dt>
                            <dd>{{ booking.booker.teacher_count|default_if_none:0 }}</dd>
                            {% if booking.notes %}
                                <dt class="text-muted">{% trans 'Kommentar:' %}</dt>
                                <dd>{{ booking.notes }}</dd>
                            {% endif %}
                            {% if booking.classbooking %}
                                <dt class="text-muted">{% trans 'Rundvisning:' %}</dt>
                                <dd>{{ booking.classbooking.tour_desired | yesno }}</dd>
                                <dt class="text-muted">{% trans 'Forplejning:' %}</dt>
                                <dd>{{ booking.classbooking.catering_desired | yesno }}</dd>
                                <dt class="text-muted">{% trans 'Oplæg om uddannelse:' %}</dt>
                                <dd>{{ booking.classbooking.presentation_desired | yesno }}</dd>
                                {% if booking.visit.product.custom_available %}
                                    <dt class="text-muted">{{ booking.visit.product.custom_name }}:</dt>
                                    <dd>{{ booking.classbooking.custom_desired | yesno }}</dd>
                                {% endif %}
                            {% endif %}
                            {% if booking.teacherbooking %}
                                {% if booking.teacherbooking.subjects %}
                                    <dt class="text-muted">{% trans 'Fag:' %}</dt>
                                    <dd>
                                        <ul>
                                            {% for subject in booking.teacherbooking.subjects.all %}
                                                <li>{{ subject }}</li>
                                            {% endfor %}
                                        </ul>
                                    </dd>
                                {% endif %}
                            {% endif %}
                        </dl>
                    </a>
                    <div class="pull-right">
                        {% if listname == 'waiting' %}
                        <button type="button"
                                data-toggle="modal"
                                data-target="#modalhost"
                                class="btn btn-default btn-xs"
                                data-modal-href="{% url 'booking-notify' booking.id %}?template={{ emailtemplate_waitinglist }}&recipients=booking:{{ booking.id }}&nogroups=1"
                                {% if booking.booker.attendee_count > object.available_seats %}disabled="disabled" title="{% trans 'Der er ikke plads nok på ventelisten' %}"{% endif %}>
                            {% trans 'Send venteliste-mail' %}
                        </button>
                        {% endif %}
                        <label>{% trans 'Vælg:' %}
                            <span class="input-container" id="move_{{ booking.id }}"></span>
                        </label>
                    </div>
                </div>
            {% endfor %}
            <button type="submit" name="action" value="delete" class="btn btn-danger pull-right" style="margin-left: 0.5em;">{% trans 'Slet valgte' %}</button>
            {% if object.product.do_create_waiting_list %}
                {% if listname == 'booking' %}
                    <button type="submit" name="action" value="enqueue" class="btn btn-default pull-right" style="margin-left: 0.5em;">{% trans 'Flyt valgte til venteliste' %}</button>
                {% elif listname == 'waiting' %}
                    <button type="submit" name="action" value="dequeue" class="btn btn-default pull-right" style="margin-left: 0.5em;">{% trans 'Tilmeld valgte' %}</button>
                {% endif %}
            {% endif %}
        </form>
    {% endif %}
</div>
