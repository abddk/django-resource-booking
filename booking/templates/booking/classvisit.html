{% extends 'lightbox-index.html' %}
{% load i18n %}
{% load staticfiles %}
{% load booking_tags %}

{% block head %}
    <link rel="stylesheet" href="{% static 'thirdparty/bootstrap-datetime-picker/css/bootstrap-datetimepicker.min.css' %}"/>
{% endblock %}

{% block header %}
{% endblock %}

{% block content %}

    {% include 'booking/modal/header.html' %}
    <div class="modal-body">
        <p>Udfyld venligst nedenstående formular for at booke et tilbud. Felter markeret med * er obligatoriske.</p>
        <div class="divider"></div>

        <form id="bookingform" class="form-horizontal clearfix" data-toggle="validator" role="form" novalidate="true" method="POST">
            {% csrf_token %}

            <div id="part1" class="formpart" data-prevbutton="cancelbutton"  data-nextbutton="nextbutton" data-next="part2" {% if bookerform.errors or not bookingform.errors %} data-first="true"{% endif %}>
                {{ bookerform.non_field_errors }}
                {% include "booking/booker/basedata.html" %}
                {% include "booking/booker/school.html" %}
                {% include "booking/booker/location.html" %}
            </div>

            <div id="part2" class="formpart" data-prevbutton="previousbutton" data-nextbutton="submitbutton" data-prev="part1"{% if bookingform.errors and not bookerform.errors %} data-first="true"{% endif %}>

                <div class="form-group">
                    <label class="col-sm-2 control-label" for="tlf">Antal Elever*</label>
                    <div class="col-sm-6{% if bookingform.student_count.errors %} has-error{% endif %}">
                        {{ bookingform.student_count }}
                    </div>
                    <div class="col-sm-3 help-block with-errors">
                        {{ bookingform.student_count.errors }}
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-sm-2 control-label" for="tlf">Antal Lærere*</label>
                    <div class="col-sm-6{% if bookingform.teacher_count.errors %} has-error{% endif %}">
                        {{ bookingform.teacher_count }}
                    </div>
                    <div class="col-sm-3 help-block with-errors">
                        {{ bookingform.teacher_count.errors }}
                    </div>
                </div>

                {% if bookingform.scheduled %}
                <div class="form-group">
                    <label class="col-sm-2 control-label" for="tlf">Tidspunkt*</label>
                    <div class="col-sm-6{% if bookingform.time.errors %} has-error{% endif %}">
                        {{ bookingform.time }}
                    </div>
                    <div class="col-sm-3 help-block with-errors">
                        {{ bookingform.time.errors }}
                    </div>
                </div>
                {% endif %}

                <div class="form-group">
                    <label class="col-sm-2 control-label" for="tlf">Rundvisning</label>
                    <div class="col-sm-6{% if bookingform.tour_desired.errors %} has-error{% endif %}">
                        {{ bookingform.tour_desired }}
                    </div>
                    <div class="col-sm-3 help-block with-errors">
                        {{ bookingform.tour_desired.errors }}
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-sm-2 control-label" for="skole">Kommentarer</label>
                    <div class="col-sm-6{% if bookingform.notes.errors %} has-error{% endif %}">
                        {{ bookingform.notes }}
                    </div>
                    <div class="col-sm-3 help-block with-errors">
                        {{ bookingform.notes.errors }}
                    </div>
                </div>
            </div>

        </form>

    </div>
    {% include 'booking/modal/footer.html' %}


{% endblock %}

{% block extra_scripts %}


    {% include 'booking/booker/location_script.html' %}
    {% include 'booking/booker/school_script.html' %}

    <script type="text/javascript" src="{% static 'thirdparty/bootstrap-datetime-picker/js/bootstrap-datetimepicker.min.js' %}"></script>
    <script type="text/javascript">
        $(function(){
            // See doc at http://www.malot.fr/bootstrap-datetimepicker/
            $("input[name=time]").datetimepicker({
                locale: 'da',
                autoclose: true
            });
        });
    </script>
    <script type="text/javascript">
    $(function(){
        $("#submitbutton").click(function(){
            $("#bookingform").submit();
        });
    });
    </script>
{% endblock %}
