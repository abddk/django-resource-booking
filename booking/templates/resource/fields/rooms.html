{% load i18n %}
{% load booking_tags %}

{% if form.rooms_needed %}
<div class="row form-group">
    <div>{{ form.rooms_needed.errors }}</div>
    <div class="col-sm-12">
        {{ form.rooms_needed }}
        <label class="{{ form.rooms_needed.css_classes }}" for="{{ form.rooms_needed.id_for_label }}">{{ form.rooms_needed.label }}</label>
    </div>
</div>
{% endif %}

{% if form.tour_available %}
<div class="row form-group">
    <div>{{ form.tour_available.errors }}</div>
    <div class="col-sm-12">
        {{ form.tour_available }}
        <label class="{{ form.tour_available.css_classes }}" for="{{ form.tour_available.id_for_label }}">{{ form.tour_available.label }}</label>
    </div>
</div>
{% endif %}

{% if form.rooms_assignment %}
<div id="rooms_needed_fields">
    <div class="row form-group">
        <div>{{ form.rooms_assignment.errors }}</div>
        <div class="col-sm-2">
            <label class="{{ form.rooms_assignment.css_classes }}" for="{{ form.rooms_assignment.id_for_label }}">{{ form.rooms_assignment.label }}:</label>
        </div>
        <div class="col-sm-10">
            {{ form.rooms_assignment }}
        </div>
    </div>
    <div id="roomsedit">
        <div class="row form-group">
            <div class="col-sm-2">
                <label class="{{ form.existingrooms.css_classes }}" for="existingrooms">{% trans "Tilføj eksisterende lokale" %}:</label>
            </div>
            <div class="col-sm-6">
                <textarea id="all_room_data" style="display: none;">{{ allrooms|jsonify }}</textarea>
                <select name="existingrooms" class="form-control input-sm" id="existingrooms">
                    <option>{% trans "Vælg lokale..." %}</option>
                </select>
            </div>
        </div>
        <div class="row form-group">
            <div class="col-sm-2">
                <label class="{{ form.newroom.css_classes }}" for="newroom">{% trans "Tilføj nyt lokale" %}:</label>
            </div>
            <div class="col-sm-6">
                <div class="input-group">
                    <input type="text" name="newroom" id="newroom" value="" class="form-control input-sm" /><span class="input-group-btn">
                    <button
                        type="button"
                        id="addnewroom"
                        value="{% trans "Tilføj" %}"
                        class="btn btn-default"
                        data-no-locality-message="{% trans 'Du skal vælge en lokalitet før du kan tilføje lokaler' %}"
                    >{% trans "Tilføj" %}</button></span>
                </div>
            </div>
        </div>
        <div><strong>{% trans "Valgte lokaler" %}:</strong></div>
        {% comment %}
            Remember to correct both the template and the printed-out items
            below.
        {% endcomment %}
        <ul id="room-item-template" style="display: none">
            <li>
                <span class="roomname">##NAME##</span>
                <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                <input type="hidden" name="rooms" value="##VALUE##" disabled="disabled" />
            </li>
        </ul>
        <ul id="chosenrooms">
            {% for room in rooms %}
                <li>
                    <span class="roomname">{{ room.name_with_locality }}</span>
                    <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                    <input type="hidden" name="rooms" value="id:{{ room.id }}" />
                </li>
            {% endfor %}
        </ul>
    </div>
</div>
{% endif %}